{% extends 'hqwebapp/base_section.html' %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load hq_shared_tags %}

{% requirejs_main "hqwebapp/js/widgets" %}

{% block page_content %}
  <p class="lead">
    {% blocktrans %}
      Enterprise Permissions
    {% endblocktrans %}
  </p>

  <!-- TODO: make help text more helpful -->
  <p class="help-block">
    {% blocktrans %}
      Web users in the controlling project space will be automatically granted their same permissions
      in the rest of the enterprise. They will not appear as members of these other spaces. You may also
      exclude specific project spaces from enterprise permissions.
    {% endblocktrans %}
  </p>

  <form method="POST" action="{% url "update_enterprise_permissions_source_domain" domain %}">
    {% csrf_token %}
    <select name="source_domain" class="hqwebapp-select2" data-allow-clear="true" data-placeholder="{% trans_html_attr "Select a Project Space" %}">
      {% for domain in all_domains %}
        <option{% if domain == source_domain %} selected{% endif %}>{{ domain }}</option>
      {% endfor %}
    </select>
    <button class="btn btn-default" type="submit">
      {% trans "Save" %}
    </button>
  </form>

  {% if source_domain %}
    {% include "enterprise/partials/enterprise_permissions_table.html" with DOMAINS=controlled_domains %}
    {% include "enterprise/partials/enterprise_permissions_table.html" with DOMAINS=ignored_domains %}
  {% endif %}

{% endblock %}
